<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Registrazione utente</title>
</head>
<body>

<h1>Registrazione</h1>

<form th:action="@{/register}" th:method="post">

    <!-- ===== Sezione dati anagrafici ===== -->
    <fieldset th:object="${user}">
        <legend>Dati personali</legend>

        <label>Nome*: <input type="text"    th:field="*{name}"          /></label><br/>
        <label>Cognome: <input type="text" th:field="*{surname}"       /></label><br/>
        <label>Email*: <input type="email"  th:field="*{email}"         /></label><br/>
<!--        <label>Telefono: <input type="text" th:field="*{numeroTelefonico}"/></label><br/>
-->		<label><input type="text" th:field="*{numeroTelefonico}" th:value="*{numeroTelefonico != null ? numeroTelefonico : ''}" /></label><br/>

        <!-- Errori relativi a User -->
        <div th:if="${#fields.hasErrors('*')}" style="color:red">
            <p th:each="e : ${#fields.errors('*')}" th:text="${e}">Errore</p>
        </div>
    </fieldset>

    <!-- ===== Sezione credenziali ===== -->
    <fieldset th:object="${credentials}">
        <legend>Credenziali di accesso</legend>

        <label>Username*: <input type="text"     th:field="*{username}" /></label><br/>
        <label>Password*: <input type="password" th:field="*{password}" /></label><br/>
<!--		<label>Conferma Password*: <input type="password" th:field="*{password}" /></label><br/>
	-->		
        <!-- Errori relativi a Credentials -->
        <div th:if="${#fields.hasErrors('*')}" style="color:red" th:errors="*{username}">
<!--<p th:each="e : ${#fields.errors('*')}" th:text="${e}">Errore</p>
-->        </div>
    </fieldset>

    <!-- Token CSRF -->
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

    <button type="submit">Registrati</button>
</form>

<div class="error" th:if="${errorMessage}">
	<p th:text="${errorMessage}"></p>
</div>

</body>
</html>
